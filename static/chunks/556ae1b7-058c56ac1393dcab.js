"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4904],{90973:function(e,t,r){function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return c(e)}(this,r)}}function c(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function d(t,r,n,o){var s,a,c=Object.create((r&&r.prototype instanceof y?r:y).prototype);return i(c,"_invoke",{value:(s=new P(o||[]),a=p,function(r,i){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===r)throw i;return{value:e,done:!0}}for(s.method=r,s.arg=i;;){var o=s.delegate;if(o){var c=function t(r,n){var i=n.method,o=r.iterator[i];if(o===e)return n.delegate=null,"throw"===i&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),m;var s=h(o,r.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,m;var a=s.arg;return a?a.done?(n[r.resultName]=a.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,m)}(o,s);if(c){if(c===m)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(a===p)throw a=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a=f;var u=h(t,n,s);if("normal"===u.type){if(a=s.done?v:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(a=v,s.method="throw",s.arg=u.arg)}})}),c}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",f="executing",v="completed",m={};function y(){}function b(){}function g(){}var k={};u(k,s,function(){return this});var w=Object.getPrototypeOf,S=w&&w(w(x([])));S&&S!==r&&n.call(S,s)&&(k=S);var O=g.prototype=y.prototype=Object.create(k);function A(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){var r;i(this,"_invoke",{value:function(i,o){function s(){return new t(function(r,s){!function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==_(l)&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,s,a)},function(e){r("throw",e,s,a)}):t.resolve(l).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,a)})}a(c.arg)}(i,o,r,s)})}return r=r?r.then(s,s):s()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw TypeError(_(t)+" is not iterable")}return b.prototype=g,i(O,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(T.prototype),u(T.prototype,a,function(){return this}),t.AsyncIterator=T,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new T(d(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},A(O),u(O,c,"Generator"),u(O,s,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function d(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=y(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||y(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e){return(g="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(e){return _(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_(e)})(e)}function k(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */k=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(t,r,n,o){var s,a,c=Object.create((r&&r.prototype instanceof v?r:v).prototype);return i(c,"_invoke",{value:(s=new P(o||[]),a=h,function(r,i){if(a===p)throw Error("Generator is already running");if(a===f){if("throw"===r)throw i;return{value:e,done:!0}}for(s.method=r,s.arg=i;;){var o=s.delegate;if(o){var c=function t(r,n){var i=n.method,o=r.iterator[i];if(o===e)return n.delegate=null,"throw"===i&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),_;var s=d(o,r.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,_;var a=s.arg;return a?a.done?(n[r.resultName]=a.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,_)}(o,s);if(c){if(c===_)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(a===h)throw a=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a=p;var u=d(t,n,s);if("normal"===u.type){if(a=s.done?f:"suspendedYield",u.arg===_)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(a=f,s.method="throw",s.arg=u.arg)}})}),c}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="executing",f="completed",_={};function v(){}function m(){}function y(){}var b={};u(b,s,function(){return this});var w=Object.getPrototypeOf,S=w&&w(w(x([])));S&&S!==r&&n.call(S,s)&&(b=S);var O=y.prototype=v.prototype=Object.create(b);function A(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){var r;i(this,"_invoke",{value:function(i,o){function s(){return new t(function(r,s){!function r(i,o,s,a){var c=d(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==g(l)&&n.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,s,a)},function(e){r("throw",e,s,a)}):t.resolve(l).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,a)})}a(c.arg)}(i,o,r,s)})}return r=r?r.then(s,s):s()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw TypeError(g(t)+" is not iterable")}return m.prototype=y,i(O,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(T.prototype),u(T.prototype,a,function(){return this}),t.AsyncIterator=T,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new T(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},A(O),u(O,c,"Generator"),u(O,s,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:x(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),_}},t}function w(e,t){for(var r,n,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,n=void 0,n=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===g(n)?n:String(n)),o)}}function S(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function A(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function T(e){var t=x();return function(){var r,n=D(e);if(t){var i=D(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return E(e)}(this,r)}}function E(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){var t="function"==typeof Map?new Map:void 0;return(C=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return P(e,arguments,D(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),R(r,e)})(e)}function P(e,t,r){return(P=x()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&R(i,r.prototype),i}).apply(null,arguments)}function x(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{w0:function(){return tQ}});var I,L,B,j,F,N,M,U,K,W,G,q,H,Y,z,V,J,X,$,Z,Q,ee,et,er,en,ei,eo,es="https://accounts.google.com/gsi",ea="".concat(es,"/client");function ec(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function eu(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError,(el=ee||(ee={})).emailMagicLinks="emailMagicLinks",el.oauth="oauth",el.otp="otp",el.crypto="crypto",el.passwords="passwords",el.passkeys="passkeys",(ed=et||(et={})).Google="google",ed.Microsoft="microsoft",ed.Apple="apple",ed.Github="github",ed.GitLab="gitlab",ed.Facebook="facebook",ed.Discord="discord",ed.Salesforce="salesforce",ed.Slack="slack",ed.Amazon="amazon",ed.Bitbucket="bitbucket",ed.LinkedIn="linkedin",ed.Coinbase="coinbase",ed.Twitch="twitch",ed.Twitter="twitter",ed.TikTok="tiktok",ed.Snapchat="snapchat",ed.Figma="figma",ed.Yahoo="yahoo",(eh=er||(er={})).Vessel="Vessel",eh.Phantom="Phantom",eh.Metamask="Metamask",eh.Coinbase="Coinbase",eh.Binance="Binance",eh.GenericEthereumWallet="Other Ethereum Wallet",eh.GenericSolanaWallet="Other Solana Wallet",(ep=en||(en={})).embedded="embedded",ep.floating="floating",(ef=ei||(ei={})).SMS="sms",ef.WhatsApp="whatsapp",ef.Email="email",(e_=eo||(eo={})).MagicLinkLoginOrCreateEvent="MAGIC_LINK_LOGIN_OR_CREATE",e_.OTPsLoginOrCreateEvent="OTP_LOGIN_OR_CREATE",e_.OTPsAuthenticate="OTP_AUTHENTICATE",e_.CryptoWalletAuthenticateStart="CRYPTO_WALLET_AUTHENTICATE_START",e_.CryptoWalletAuthenticate="CRYPTO_WALLET_AUTHENTICATE",e_.PasswordCreate="PASSWORD_CREATE",e_.PasswordAuthenticate="PASSWORD_AUTHENTICATE",e_.PasswordResetByEmailStart="PASSWORD_RESET_BY_EMAIL_START",e_.PasswordResetByEmail="PASSWORD_RESET_BY_EMAIL",e_.PasskeyRegister="PASSKEY_REGISTER",e_.PasskeyAuthenticate="PASSKEY_AUTHENTICATE",e_.PasskeySkip="PASSKEY_SKIP",e_.PasskeyDone="PASSKEY_DONE",e_.B2BMagicLinkEmailLoginOrSignup="B2B_MAGIC_LINK_EMAIL_LOGIN_OR_SIGNUP",e_.B2BMagicLinkAuthenticate="B2B_MAGIC_LINK_AUTHENTICATE",e_.B2BMagicLinkEmailDiscoverySend="B2B_MAGIC_LINK_EMAIL_DISCOVERY_SEND",e_.B2BMagicLinkDiscoveryAuthenticate="B2B_MAGIC_LINK_DISCOVERY_AUTHENTICATE",e_.B2BSSOStart="B2B_SSO_START",e_.B2BSSOAuthenticate="B2B_SSO_AUTHENTICATE",e_.B2BOAuthAuthenticate="B2B_OAUTH_AUTHENTICATE",e_.B2BOAuthDiscoveryAuthenticate="B2B_OAUTH_DISCOVERY_AUTHENTICATE",e_.B2BDiscoveryOrganizationsCreate="B2B_DISCOVERY_ORGANIZATIONS_CREATE",e_.B2BDiscoveryIntermediateSessionExchange="B2B_DISCOVERY_INTERMEDIATE_SESSION_EXCHANGE",e_.B2BPasswordAuthenticate="B2B_PASSWORD_AUTHENTICATE",e_.B2BPasswordResetByEmailStart="B2B_PASSWORD_RESET_BY_EMAIL_START",e_.B2BPasswordResetByEmail="B2B_PASSWORD_RESET_BY_EMAIL",e_.B2BPasswordResetBySession="B2B_PASSWORD_RESET_BY_SESSION";var el,ed,eh,ep,ef,e_,ev,em,ey,eb,eg,ek=function(e){A(r,C(Error));var t=T(r);function r(e,n){var i;return O(this,r),(i=t.call(this,e+"\n"+n)).message=e+"\n"+n,i.name="SDKAPIUnreachableError",i.details=n,Object.setPrototypeOf(E(i),r.prototype),i}return S(r)}(),ew=function(e){A(r,C(Error));var t=T(r);function r(e,n){var i;return O(this,r),(i=t.call(this)).name="StytchSDKUsageError",i.message="Invalid call to ".concat(e,"\n")+n,i}return S(r)}(),eS=function(e){A(r,C(Error));var t=T(r);function r(e){O(this,r),(n=t.call(this)).name="StytchSDKSchemaError";var n,i,o=null===(i=e.body)||void 0===i?void 0:i.map(function(e){return"".concat(e.dataPath,": ").concat(e.message)}).join("\n");return n.message="[400] Request does not match expected schema\n".concat(o),n}return S(r)}(),eO=function(e){A(r,C(Error));var t=T(r);function r(e){O(this,r),(n=t.call(this)).name="StytchSDKAPIError";var n,i=e.status_code,o=e.error_type,s=e.error_message,a=e.error_url,c=e.request_id;return n.error_type=o,n.error_message=s,n.error_url=a,n.request_id=c,n.status_code=i,n.message="[".concat(i,"] ").concat(o,"\n")+"".concat(s,"\n")+"See ".concat(a," for more information.\n")+(c?"request_id: ".concat(c,"\n"):""),n}return S(r)}(),eA=["unauthorized_credentials","user_unauthenticated","invalid_secret_authentication","session_not_found"];(eT=ev||(ev={})).BiometricsSensorError="biometrics_sensor_error",eT.DeviceCredentialsNotAllowed="device_credentials_not_allowed",eT.DeviceHardwareError="device_hardware_error",eT.InternalError="internal_error",eT.KeyInvalidated="key_invalidated",eT.KeystoreUnavailable="keystore_unavailable",eT.NoBiometricsEnrolled="no_biometrics_enrolled",eT.NoBiometricsRegistration="no_biometrics_registration",eT.SessionExpired="session_expired",eT.UserCancellation="user_cancellation",eT.UserLockedOut="user_locked_out",eT.BiometricsNotAvailable="biometrics_not_available",(eE=em||(em={})).emailMagicLinks="emailMagicLinks",eE.sso="sso",eE.passwords="passwords",eE.oauth="oauth",(eC=ey||(ey={})).Discovery="Discovery",eC.Organization="Organization",eC.PasswordReset="PasswordReset",(eP=eb||(eb={})).Google="google",eP.Microsoft="microsoft",(eg||(eg={})).RequiredCatcha="Catcha Required";var eT,eE,eC,eP,ex,eR=function(e){A(r,C(Error));var t=T(r);function r(e){var n;return O(this,r),(n=t.call(this,e)).type=e,n}return S(r)}();function eD(e){var t,r=e.method,n=e.errorMessage,i=e.finalURL,o=e.basicAuthHeader,s=e.xSDKClientHeader,a=e.xSDKParentHostHeader,c=e.body;return eu(this,void 0,void 0,k().mark(function e(){var u,l,d,h,p,f;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u={Authorization:o,"Content-Type":"application/json","X-SDK-Client":s},a&&(u["X-SDK-Parent-Host"]=a),l={method:r,headers:u,body:c&&JSON.stringify(c)},e.prev=3,e.next=6,fetch(i,l);case 6:d=e.sent,e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),"Failed to fetch"!==e.t0.message){e.next=13;break}throw new ek(n,"Unable to contact the Stytch servers. Are you online?");case 13:throw e.t0;case 14:if(!(d.status<=299)){e.next=25;break}return e.prev=15,e.next=18,d.json();case 18:return h=e.sent,e.abrupt("return",h.data);case 22:throw e.prev=22,e.t1=e.catch(15),new ek(n,"Invalid JSON response from the Stytch servers.");case 25:if(200===d.status||!(null===(t=d.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))){e.next=38;break}return e.prev=26,e.next=29,d.json();case 29:p=e.sent,e.next=35;break;case 32:throw e.prev=32,e.t2=e.catch(26),new ek(n,"Invalid or no response from server");case 35:if(!("body"in p||"params"in p||"query"in p)){e.next=37;break}throw new eS(p);case 37:throw new eO(p);case 38:return e.prev=38,e.next=41,d.text();case 41:f=e.sent,e.next=47;break;case 44:throw e.prev=44,e.t3=e.catch(38),new ek(n,"Invalid response from the Stytch servers.");case 47:if(!f.includes("Captcha required")){e.next=49;break}throw new eR(eg.RequiredCatcha);case 49:throw new ek(n,"Invalid response from the Stytch servers.");case 50:case"end":return e.stop()}},e,null,[[3,9],[15,22],[26,32],[38,44]])}))}var eI=new Uint8Array(16);function eL(){if(!ex&&!(ex="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ex(eI)}for(var eB=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ej=[],eF=0;eF<256;++eF)ej.push((eF+256).toString(16).substr(1));function eN(e,t,r){var n=(e=e||{}).random||(e.rng||eL)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(ej[e[t+0]]+ej[e[t+1]]+ej[e[t+2]]+ej[e[t+3]]+"-"+ej[e[t+4]]+ej[e[t+5]]+"-"+ej[e[t+6]]+ej[e[t+7]]+"-"+ej[e[t+8]]+ej[e[t+9]]+"-"+ej[e[t+10]]+ej[e[t+11]]+ej[e[t+12]]+ej[e[t+13]]+ej[e[t+14]]+ej[e[t+15]]).toLowerCase();if(!("string"==typeof r&&eB.test(r)))throw TypeError("Stringified UUID is invalid");return r}(n)}var eM={};function eU(e,t){return eu(this,void 0,void 0,k().mark(function r(){return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===eM[e]){r.next=2;break}return r.abrupt("return",eM[e]);case 2:return eM[e]=function(e,t){return new Promise(function(r,n){var i,o=function(e){var t=eW(e);if(t[0])return t[0]}(e);if(o&&"true"===o.dataset.loaded)try{r(t())}catch(t){return n(Error("".concat(e," already loaded, but module was not found in global scope: ").concat(t)))}var s=((i=document.createElement("script")).setAttribute("src",e),i.setAttribute("async","true"),i.setAttribute("defer","true"),document.head.appendChild(i),i);s.addEventListener("load",function(){s.dataset.loaded="true";try{r(t())}catch(t){n(Error("".concat(e," was loaded, but module was not found in global scope: ").concat(t)))}}),s.addEventListener("error",function(t){n(Error("".concat(e," could not be loaded: ").concat(t)))})})}(e,t),r.abrupt("return",eM[e]);case 4:case"end":return r.stop()}},r)}))}var eK,eW=function(e){return document.querySelectorAll('script[src="'.concat(e,'"]'))},eG=["[Stytch]"],eq=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=console).warn.apply(e,eG.concat(r))},eH=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=console).error.apply(e,eG.concat(r))},eY="\nYou can find your public token at https://stytch.com/dashboard/api-keys.",ez=function(e){var t={isObject:function(r,n){if(!("object"===g(n)&&!Array.isArray(n)&&null!==n))throw new ew(e,r+" must be an object.");return t},isOptionalObject:function(e,r){return void 0===r?t:t.isObject(e,r)},isString:function(r,n){if("string"!=typeof n)throw new ew(e,r+" must be a string.");return t},isOptionalString:function(e,r){return void 0===r?t:t.isString(e,r)},isStringArray:function(r,n){if(!Array.isArray(n))throw new ew(e,r+" must be an array of strings.");var i,o=v(n);try{for(o.s();!(i=o.n()).done;)if("string"!=typeof i.value)throw new ew(e,r+" must be an array of strings.")}catch(e){o.e(e)}finally{o.f()}return t},isOptionalStringArray:function(e,r){return void 0===r?t:t.isStringArray(e,r)},isNumber:function(r,n){if("number"!=typeof n)throw new ew(e,r+" must be a number.");return t},isOptionalNumber:function(e,r){return void 0===r?t:t.isNumber(e,r)},isBoolean:function(r,n){if("boolean"!=typeof n)throw new ew(e,r+" must be a boolean.");return t},isOptionalBoolean:function(e,r){return void 0===r?t:t.isBoolean(e,r)}};return t},eV=function(e){return ec(e,["request_id","status_code"])},eJ=function(e){return ec(e,["__user"])},eX=S(function e(t,r,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return Promise.resolve(void 0)};O(this,e),this.bootstrapPromise=n,this.isEnabled=function(){return eu(i,void 0,void 0,k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.state.then(function(e){return e.enabled}));case 1:case"end":return e.stop()}},e,this)}))},this.getTelemetryID=function(){return eu(i,void 0,void 0,k().mark(function e(){var t,r,n,i;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state;case 2:if(r=(t=e.sent).publicToken,n=t.enabled,i=t.dfpBackendURL,n){e.next=8;break}return e.abrupt("return",void 0);case 8:return e.next=10,window.GetTelemetryID(r,"".concat(i,"/submit"));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)}))},this.getDFPTelemetryIDAndCaptcha=function(){return eu(i,void 0,void 0,k().mark(function e(){var t,r,n,i,o,s;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state;case 2:if(r=(t=e.sent).enabled,n=t.executeRecaptcha,i=t.mode,o=void 0,s=void 0,r){e.next=12;break}return e.next=11,n();case 11:s=e.sent;case 12:if("DECISIONING"!==i){e.next=18;break}return e.next=15,this.getTelemetryID();case 15:o=e.sent,e.next=25;break;case 18:if("OBSERVATION"!==i){e.next=25;break}return e.next=21,this.getTelemetryID();case 21:return o=e.sent,e.next=24,n();case 24:s=e.sent;case 25:return e.abrupt("return",{dfp_telemetry_id:o,captcha_token:s});case 26:case"end":return e.stop()}},e,this)}))},this.retryWithCaptchaAndDFP=function(e,t){return eu(i,void 0,void 0,k().mark(function r(){var n,i,o;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.state;case 2:if(i=(n=r.sent).enabled,o=n.executeRecaptcha,e.type!==eg.RequiredCatcha||!i){r.next=14;break}if(!t.body){r.next=13;break}return r.next=9,this.getTelemetryID();case 9:return t.body.dfp_telemetry_id=r.sent,r.next=12,o();case 12:t.body.captcha_token=r.sent;case 13:return r.abrupt("return",t);case 14:throw Error("Unable to query captcha and/or dfp telemetry ID");case 15:case"end":return r.stop()}},r,this)}))},this.state=n.then(function(e){return eu(i,void 0,void 0,k().mark(function n(){return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.runDFPProtectedAuth){n.next=2;break}return n.abrupt("return",{publicToken:t,dfpBackendURL:r,enabled:!1,loaded:!1,executeRecaptcha:o});case 2:return n.next=4,void eU("".concat("https://elements.stytch.com","/telemetry.js"),function(){return window});case 4:return n.abrupt("return",{publicToken:t,dfpBackendURL:r,enabled:!0,mode:e.dfpProtectedAuthMode||"OBSERVATION",loaded:!0,executeRecaptcha:o});case 5:case"end":return n.stop()}},n)}))})}),e$=function(){return{isEnabled:function(){return eu(void 0,void 0,void 0,k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}},e)}))},getTelemetryID:function(){return eu(void 0,void 0,void 0,k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}},e)}))},getDFPTelemetryIDAndCaptcha:function(){return eu(void 0,void 0,void 0,k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{dfp_telemetry_id:void 0,captcha_token:void 0});case 1:case"end":return e.stop()}},e)}))},retryWithCaptchaAndDFP:function(){return eu(void 0,void 0,void 0,k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("DFP protected auth is disabled");case 1:case"end":return e.stop()}},e)}))}}},eZ=function(){function e(){O(this,e)}return S(e,null,[{key:"marshall",value:function(e){return Object.assign(Object.assign({},e),{name:e.name,message:e.message,stack:e.stack})}},{key:"inflate",value:function(e,t){var r=new e(t);return Object.assign(r,t),Object.setPrototypeOf(r,e.prototype),r}},{key:"unmarshall",value:function(t){if("name"in t)switch(t.name){case"SDKAPIUnreachableError":return e.inflate(ek,t);case"StytchSDKSchemaError":return e.inflate(eS,t);case"StytchSDKAPIError":return e.inflate(eO,t);case"TypeError":return e.inflate(TypeError,t);case"SyntaxError":return e.inflate(SyntaxError,t);case"ReferenceError":return e.inflate(ReferenceError,t);case"RangeError":return e.inflate(RangeError,t);case"EvalError":return e.inflate(EvalError,t);case"URIError":return e.inflate(URIError,t)}return e.inflate(Error,t)}}]),e}(),eQ=function(){function e(t){O(this,e),this.maxBatchSize=t.maxBatchSize,this.logEventURL=t.logEventURL,setInterval(this.flush.bind(this),t.intervalDurationMs),this.batch=[]}return S(e,[{key:"logEvent",value:function(e,t){this.batch.push({telemetry:e,event:t}),this.batch.length>=this.maxBatchSize&&this.flush()}},{key:"flush",value:function(){return eu(this,void 0,void 0,k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.batch.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.batch,this.batch=[],e.prev=4,e.next=7,fetch(this.logEventURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:case"end":return e.stop()}},e,this,[[4,9]])}))}}]),e}();(I=eK||(eK={})).LoginOrCreateEML="login_or_create_eml",I.LoginOrCreateOTP="login_or_create_otp",I.ResetPassword="reset_password";var e0=S(function e(t,r){var n=this;O(this,e),this._networkClient=t,this._subscriptionService=r,this.get=function(){return eu(n,void 0,void 0,k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._networkClient.fetchSDK({url:"/users/me",errorMessage:"Failed to retrieve user info.",method:"GET"});case 2:return t=eV(e.sent),this._subscriptionService.updateUser(t),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,this)}))},this.getSync=function(){return n._subscriptionService.getUser()},this.update=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.user.update").isOptionalObject("untrusted_metadata",e.untrusted_metadata),t.next=3,this._networkClient.fetchSDK({url:"/users/me",body:e,errorMessage:"Failed to update user.",method:"PUT"});case 3:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 7:case"end":return t.stop()}},t,this)}))},this.deleteEmail=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._networkClient.fetchSDK({url:"/users/emails/".concat(e),errorMessage:"Failed to delete email.",method:"DELETE"});case 2:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))},this.deletePhoneNumber=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._networkClient.fetchSDK({url:"/users/phone_numbers/".concat(e),errorMessage:"Failed to delete phone number.",method:"DELETE"});case 2:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))},this.deleteTOTP=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._networkClient.fetchSDK({url:"/users/totps/".concat(e),errorMessage:"Failed to delete TOTP.",method:"DELETE"});case 2:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))},this.deleteOAuthRegistration=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._networkClient.fetchSDK({url:"/users/oauth/".concat(e),errorMessage:"Failed to delete OAuth registration.",method:"DELETE"});case 2:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))},this.deleteWebauthnRegistration=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._networkClient.fetchSDK({url:"/users/webauthn_registrations/".concat(e),errorMessage:"Failed to delete WebAuthn registration.",method:"DELETE"});case 2:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))},this.deleteBiometricRegistration=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._networkClient.fetchSDK({url:"/users/biometric_registrations/".concat(e),errorMessage:"Failed to delete Biometric registration.",method:"DELETE"});case 2:return n=eV((r=t.sent).__user),this._subscriptionService.updateUser(n),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))},this.onChange=function(e){var t=n._subscriptionService.getUser();return n._subscriptionService.subscribeToState(function(r){var n;(null==r?void 0:r.user)!==t&&e(t=null!==(n=null==r?void 0:r.user)&&void 0!==n?n:null)})}}),e1=function(){function e(t,r){var n=this;O(this,e),this._networkClient=t,this._subscriptionService=r,this.getSync=function(){return n._subscriptionService.getSession()},this.onChange=function(e){var t=n._subscriptionService.getSession();return n._subscriptionService.subscribeToState(function(r){var n;(null==r?void 0:r.session)!==t&&e(t=null!==(n=null==r?void 0:r.session)&&void 0!==n?n:null)})},this.revoke=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._networkClient.fetchSDK({url:"/sessions/revoke",errorMessage:"Error revoking session",method:"POST"});case 3:return r=t.sent,this._subscriptionService.destroyState(),t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),((null==e?void 0:e.forceClear)||eA.includes(t.t0.error_type))&&this._subscriptionService.destroyState(),t.t0;case 12:case"end":return t.stop()}},t,this,[[0,8]])}))},this.authenticate=function(e){return eu(n,void 0,void 0,k().mark(function t(){var r,n;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={session_duration_minutes:null==e?void 0:e.session_duration_minutes},t.next=4,this._networkClient.fetchSDK({url:"/sessions/authenticate",body:r,errorMessage:"Error authenticating session",method:"POST"});case 4:return n=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:n.session,user:n.user},session_token:n.session_token,session_jwt:n.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(n));case 9:throw t.prev=9,t.t0=t.catch(0),eA.includes(t.t0.error_type)&&this._subscriptionService.destroyState(),t.t0;case 13:case"end":return t.stop()}},t,this,[[0,9]])}))}}return S(e,[{key:"getTokens",value:function(){return this._subscriptionService.getTokens()}},{key:"updateSession",value:function(e){this._subscriptionService.updateTokens(e)}}]),e}(),e2=Promise.resolve({pkceRequiredForEmailMagicLinks:!1}),e3=function(){function e(t,r,n,i){var o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e$();O(this,e),this._networkClient=t,this._subscriptionService=r,this._pkceManager=n,this._passwordResetPKCEManager=i,this._config=s,this.dfpProtectedAuth=a,this.email={loginOrCreate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return eu(o,void 0,void 0,k().mark(function r(){var n,i,o,s,a,c;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._config;case 2:if(n=r.sent.pkceRequiredForEmailMagicLinks,i=void 0,!n){r.next=9;break}return r.next=8,this.getCodeChallenge();case 8:i=r.sent;case 9:return r.next=11,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 11:return s=(o=r.sent).dfp_telemetry_id,a=o.captcha_token,c=Object.assign(Object.assign({},t),{email:e,code_challenge:i,captcha_token:a,dfp_telemetry_id:s}),r.abrupt("return",this._networkClient.retriableFetchSDK({url:"/magic_links/email/login_or_create",body:c,errorMessage:"Failed to send magic link",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 16:case"end":return r.stop()}},r,this)}))},send:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return eu(o,void 0,void 0,k().mark(function r(){var n,i,o,s,a,c,u;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._config;case 2:if(n=r.sent.pkceRequiredForEmailMagicLinks,i=void 0,!n){r.next=9;break}return r.next=8,this.getCodeChallenge();case 8:i=r.sent;case 9:return r.next=11,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 11:return s=(o=r.sent).dfp_telemetry_id,a=o.captcha_token,c=Object.assign(Object.assign({},t),{email:e,code_challenge:i,captcha_token:a,dfp_telemetry_id:s}),u=this._subscriptionService.getSession()?"/magic_links/email/send/secondary":"/magic_links/email/send/primary",r.abrupt("return",this._networkClient.retriableFetchSDK({url:u,body:c,errorMessage:"Failed to send magic link",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 18:case"end":return r.stop()}},r,this)}))}},this.authenticate=function(e,t){return eu(o,void 0,void 0,k().mark(function r(){var n,i;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return ez("stytch.magicLinks.authenticate").isString("Token",e).isNumber("session_duration_minutes",t.session_duration_minutes),r.next=3,this._passwordResetPKCEManager.getPKPair();case 3:if(n=r.sent,i=null,!(null==n?void 0:n.code_verifier)){r.next=19;break}return r.prev=6,r.next=9,this.handlePKCEForAuthenticate(this._passwordResetPKCEManager,Object.assign(Object.assign({},t),{token:e}));case 9:i=r.sent,r.next=19;break;case 12:if(r.prev=12,r.t0=r.catch(6),!r.t0.message.includes("pkce")){r.next=18;break}console.log("Authenticate with passwords pkce namespace failed. Falling back to authenticate with magic_links namespace."),r.next=19;break;case 18:throw r.t0;case 19:if(i){r.next=23;break}return r.next=22,this.handlePKCEForAuthenticate(this._pkceManager,Object.assign(Object.assign({},t),{token:e}));case 22:i=r.sent;case 23:return this._subscriptionService.updateStateAndTokens({state:{session:i.session,user:i.user},session_token:i.session_token,session_jwt:i.session_jwt,intermediate_session_token:null}),r.abrupt("return",eJ(i));case 25:case"end":return r.stop()}},r,this,[[6,12]])}))}}return S(e,[{key:"getCodeChallenge",value:function(){return eu(this,void 0,void 0,k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._pkceManager.getPKPair();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t.code_challenge);case 5:return e.next=7,this._pkceManager.startPKCETransaction();case 7:return t=e.sent,e.abrupt("return",t.code_challenge);case 9:case"end":return e.stop()}},e,this)}))}},{key:"handlePKCEForAuthenticate",value:function(e,t){return eu(this,void 0,void 0,k().mark(function r(){var n,i,o;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getPKPair();case 2:return i=Object.assign({code_verifier:null==(n=r.sent)?void 0:n.code_verifier},t),r.next=6,this._networkClient.fetchSDK({url:"/magic_links/authenticate",body:i,errorMessage:"Failed to authenticate token.",method:"POST"});case 6:return o=r.sent,e.clearPKPair(),r.abrupt("return",o);case 9:case"end":return r.stop()}},r,this)}))}}]),e}(),e4=S(function e(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return Promise.resolve(void 0)},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e$();O(this,e),this._networkClient=t,this._subscriptionService=r,this.executeRecaptcha=i,this.dfpProtectedAuth=o,this.sms={loginOrCreate:function(e,t){return eu(n,void 0,void 0,k().mark(function r(){var n,i,o,s;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 2:return i=(n=r.sent).dfp_telemetry_id,o=n.captcha_token,s=Object.assign(Object.assign({},t),{phone_number:e,captcha_token:o,dfp_telemetry_id:i}),r.abrupt("return",this._networkClient.retriableFetchSDK({url:"/otps/sms/login_or_create",body:s,errorMessage:"Failed to send one time passcode",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 7:case"end":return r.stop()}},r,this)}))},send:function(e,t){return eu(n,void 0,void 0,k().mark(function r(){var n,i,o,s,a;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 2:return i=(n=r.sent).dfp_telemetry_id,o=n.captcha_token,s=Object.assign(Object.assign({},t),{phone_number:e,captcha_token:o,dfp_telemetry_id:i}),a=this._subscriptionService.getSession()?"/otps/sms/send/secondary":"/otps/sms/send/primary",r.abrupt("return",this._networkClient.retriableFetchSDK({url:a,body:s,errorMessage:"Failed to send one time passcode",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 9:case"end":return r.stop()}},r,this)}))}},this.whatsapp={loginOrCreate:function(e,t){return eu(n,void 0,void 0,k().mark(function r(){var n,i,o,s;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 2:return i=(n=r.sent).dfp_telemetry_id,o=n.captcha_token,s=Object.assign(Object.assign({},t),{phone_number:e,dfp_telemetry_id:i,captcha_token:o}),r.abrupt("return",this._networkClient.retriableFetchSDK({url:"/otps/whatsapp/login_or_create",body:s,errorMessage:"Failed to send one time passcode",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 7:case"end":return r.stop()}},r,this)}))},send:function(e,t){return eu(n,void 0,void 0,k().mark(function r(){var n,i,o,s,a;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 2:return i=(n=r.sent).dfp_telemetry_id,o=n.captcha_token,s=Object.assign(Object.assign({},t),{phone_number:e,captcha_token:o,dfp_telemetry_id:i}),a=this._subscriptionService.getSession()?"/otps/whatsapp/send/secondary":"/otps/whatsapp/send/primary",r.abrupt("return",this._networkClient.retriableFetchSDK({url:a,body:s,errorMessage:"Failed to send one time passcode",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 9:case"end":return r.stop()}},r,this)}))}},this.email={loginOrCreate:function(e,t){return eu(n,void 0,void 0,k().mark(function r(){var n,i;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.executeRecaptcha();case 2:return n=r.sent,i=Object.assign(Object.assign({},t),{email:e,captcha_token:n}),r.abrupt("return",this._networkClient.fetchSDK({url:"/otps/email/login_or_create",body:i,errorMessage:"Failed to send one time passcode",method:"POST"}));case 5:case"end":return r.stop()}},r,this)}))},send:function(e,t){return eu(n,void 0,void 0,k().mark(function r(){var n,i,o;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.executeRecaptcha();case 2:return n=r.sent,i=Object.assign(Object.assign({},t),{email:e,captcha_token:n}),o=this._subscriptionService.getSession()?"/otps/email/send/secondary":"/otps/email/send/primary",r.abrupt("return",this._networkClient.fetchSDK({url:o,body:i,errorMessage:"Failed to send one time passcode",method:"POST"}));case 7:case"end":return r.stop()}},r,this)}))}},this.authenticate=function(e,t,r){return eu(n,void 0,void 0,k().mark(function n(){var i,o,s;return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ez("stytch.otps.authenticate").isString("Code",e).isNumber("session_duration_minutes",r.session_duration_minutes),n.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return o=Object.assign({token:e,method_id:t,dfp_telemetry_id:(i=n.sent).dfp_telemetry_id,captcha_token:i.captcha_token},r),n.next=9,this._networkClient.retriableFetchSDK({url:"/otps/authenticate",body:o,errorMessage:"Failed to authenticate token.",method:"POST",retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 9:return s=n.sent,this._subscriptionService.updateStateAndTokens({state:{session:s.session,user:s.user},session_token:s.session_token,session_jwt:s.session_jwt,intermediate_session_token:null}),n.abrupt("return",eJ(s));case 12:case"end":return n.stop()}},n,this)}))}}),e8=function(){function e(t,r,n,i,o){O(this,e),this._networkClient=t,this._subscriptionService=r,this._pkceManager=n,this._dynamicConfig=i,this._config=o,this.google={start:this.startOAuthFlow(et.Google)},this.apple={start:this.startOAuthFlow(et.Apple)},this.microsoft={start:this.startOAuthFlow(et.Microsoft)},this.github={start:this.startOAuthFlow(et.Github)},this.gitlab={start:this.startOAuthFlow(et.GitLab)},this.facebook={start:this.startOAuthFlow(et.Facebook)},this.discord={start:this.startOAuthFlow(et.Discord)},this.salesforce={start:this.startOAuthFlow(et.Salesforce)},this.slack={start:this.startOAuthFlow(et.Slack)},this.amazon={start:this.startOAuthFlow(et.Amazon)},this.bitbucket={start:this.startOAuthFlow(et.Bitbucket)},this.linkedin={start:this.startOAuthFlow(et.LinkedIn)},this.coinbase={start:this.startOAuthFlow(et.Coinbase)},this.twitch={start:this.startOAuthFlow(et.Twitch)},this.twitter={start:this.startOAuthFlow(et.Twitter)},this.tiktok={start:this.startOAuthFlow(et.TikTok)},this.snapchat={start:this.startOAuthFlow(et.Snapchat)},this.figma={start:this.startOAuthFlow(et.Figma)},this.yahoo={start:this.startOAuthFlow(et.Yahoo)}}return S(e,[{key:"authenticate",value:function(e,t){return eu(this,void 0,void 0,k().mark(function r(){var n,i;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return ez("stytch.oauth.authenticate").isString("Token",e).isNumber("session_duration_minutes",t.session_duration_minutes),r.next=3,this._pkceManager.getPKPair();case 3:return(n=r.sent)||eq("No code verifier found in local storage for OAuth flow.\nConsider using stytch.oauth.$provider.start() to add PKCE to your OAuth flows for added security.\nSee https://stytch.com/docs/oauth#guides_pkce for more information."),r.next=7,this._networkClient.fetchSDK({url:"/oauth/authenticate",method:"POST",body:Object.assign({token:e,code_verifier:null==n?void 0:n.code_verifier},t),errorMessage:"Failed to authenticate token"});case 7:return i=r.sent,this._pkceManager.clearPKPair(),this._subscriptionService.updateStateAndTokens({state:{session:i.session,user:eV(i.__user)},session_token:i.session_token,session_jwt:i.session_jwt,intermediate_session_token:null}),r.abrupt("return",eJ(i));case 11:case"end":return r.stop()}},r,this)}))}},{key:"getBaseApiUrl",value:function(){return eu(this,void 0,void 0,k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._dynamicConfig;case 2:if(!(t=e.sent.cnameDomain)){e.next=6;break}return e.abrupt("return","https://".concat(t));case 6:if(!this._config.publicToken.includes("public-token-test")){e.next=8;break}return e.abrupt("return",this._config.testAPIURL);case 8:return e.abrupt("return",this._config.liveAPIURL);case 9:case"end":return e.stop()}},e,this)}))}},{key:"startOAuthFlow",value:function(e){var t=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.login_redirect_url,i=r.signup_redirect_url,o=r.custom_scopes,s=r.provider_params;return eu(t,void 0,void 0,k().mark(function t(){var r,a,c,u,l,d,h;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._dynamicConfig;case 2:return a=(r=t.sent).cnameDomain,c=r.pkceRequiredForOAuth,t.next=7,this.getBaseApiUrl();case 7:if(u=t.sent,this._networkClient.logEvent({name:"start_oauth_flow",details:{provider_type:e,custom_scopes:o,cname_domain:a,pkce:c,provider_params:s}}),(l=new URL("".concat(u,"/v1/public/oauth/").concat(e,"/start"))).searchParams.set("public_token",this._config.publicToken),!c){t.next=18;break}return t.next=14,this._pkceManager.startPKCETransaction();case 14:d=t.sent,l.searchParams.set("code_challenge",d.code_challenge),t.next=19;break;case 18:this._pkceManager.clearPKPair();case 19:if(o&&(ez("startOAuthFlow").isStringArray("custom_scopes",o),l.searchParams.set("custom_scopes",o.join(" "))),s)for(h in ez("startOAuthFlow").isOptionalObject("provider_params",s),s)l.searchParams.set("provider_"+h,s[h]);n&&l.searchParams.set("login_redirect_url",n),i&&l.searchParams.set("signup_redirect_url",i),window.location.href=l.toString();case 24:case"end":return t.stop()}},t,this)}))}}}]),e}(),e6=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return Promise.resolve(void 0)},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e$();O(this,e),this._networkClient=t,this._subscriptionService=r,this.executeRecaptcha=n,this.dfpProtectedAuth=i}return S(e,[{key:"authenticateStart",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.cryptoWallets.authenticateStart").isString("crypto_wallet_address",e.crypto_wallet_address).isString("crypto_wallet_type",e.crypto_wallet_type),r=!!this._subscriptionService.getSession(),t.next=4,this.executeRecaptcha();case 4:return n=t.sent,i=r?"/crypto_wallets/authenticate/start/secondary":"/crypto_wallets/authenticate/start/primary",t.abrupt("return",this._networkClient.fetchSDK({url:i,method:"POST",errorMessage:"Failed to start wallet authentication.",body:{crypto_wallet_address:e.crypto_wallet_address,crypto_wallet_type:e.crypto_wallet_type,captcha_token:n}}));case 7:case"end":return t.stop()}},t,this)}))}},{key:"authenticate",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.cryptoWallets.authenticate").isString("signature",e.signature).isString("crypto_wallet_address",e.crypto_wallet_address).isString("crypto_wallet_type",e.crypto_wallet_type).isNumber("session_duration_minutes",e.session_duration_minutes),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/crypto_wallets/authenticate",method:"POST",errorMessage:"Failed to authenticate.",body:{session_duration_minutes:e.session_duration_minutes,crypto_wallet_address:e.crypto_wallet_address,crypto_wallet_type:e.crypto_wallet_type,signature:e.signature,captcha_token:i,dfp_telemetry_id:n},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:eV(o.__user)},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(o));case 11:case"end":return t.stop()}},t,this)}))}}]),e}(),e5=function(){function e(t,r,n){O(this,e),this._networkClient=t,this._subscriptionService=r,this.dfpProtectedAuth=n}return S(e,[{key:"create",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.totps.create").isNumber("expiration_minutes",e.expiration_minutes),t.next=3,this._networkClient.fetchSDK({url:"/totps",method:"POST",errorMessage:"Failed to create TOTP",body:{expiration_minutes:e.expiration_minutes}});case 3:return r=t.sent,this._subscriptionService.updateUser(r.__user),t.abrupt("return",eJ(r));case 6:case"end":return t.stop()}},t,this)}))}},{key:"authenticate",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.totps.authenticate").isNumber("session_duration_minutes",e.session_duration_minutes).isString("totp_code",e.totp_code),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/totps/authenticate",method:"POST",errorMessage:"Failed to authenticate TOTP",body:{session_duration_minutes:e.session_duration_minutes,totp_code:e.totp_code,captcha_token:i,dfp_telemetry_id:n},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:o.__user},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(o));case 11:case"end":return t.stop()}},t,this)}))}},{key:"recoveryCodes",value:function(){return eu(this,void 0,void 0,k().mark(function e(){return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._networkClient.fetchSDK({url:"/totps/recovery_codes",method:"POST",errorMessage:"Failed to retrieve recovery codes"}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"recover",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.totps.recover").isNumber("session_duration_minutes",e.session_duration_minutes).isString("recovery_code",e.recovery_code),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/totps/recover",method:"POST",errorMessage:"Failed to recover TOTP",body:{session_duration_minutes:e.session_duration_minutes,recovery_code:e.recovery_code,captcha_token:i,dfp_telemetry_id:n},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:o.__user},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(o));case 11:case"end":return t.stop()}},t,this)}))}}]),e}();function e9(e){for(var t="==".slice(0,(4-e.length%4)%4),r=e.replace(/-/g,"+").replace(/_/g,"/")+t,n=atob(r),i=new ArrayBuffer(n.length),o=new Uint8Array(i),s=0;s<n.length;s++)o[s]=n.charCodeAt(s);return i}function e7(e){var t,r="",n=v(new Uint8Array(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;r+=String.fromCharCode(i)}}catch(e){n.e(e)}finally{n.f()}return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var te="copy",tt="convert";function tr(e,t,r){if(t===te)return r;if(t===tt)return e(r);if(t instanceof Array)return r.map(function(r){return tr(e,t[0],r)});if(t instanceof Object){for(var n={},i=0,o=Object.entries(t);i<o.length;i++){var s=m(o[i],2),a=s[0],c=s[1];if(c.derive){var u=c.derive(r);void 0!==u&&(r[a]=u)}if(a in r)null!=r[a]?n[a]=tr(e,c.schema,r[a]):n[a]=null;else if(c.required)throw Error("Missing key: ".concat(a))}return n}}function tn(e,t){return{required:!0,schema:e,derive:t}}function ti(e){return{required:!0,schema:e}}function to(e){return{required:!1,schema:e}}var ts={type:ti(te),id:ti(tt),transports:to(te)},ta={appid:to(te),appidExclude:to(te),credProps:to(te)},tc={appid:to(te),appidExclude:to(te),credProps:to(te)},tu={publicKey:ti({rp:ti(te),user:ti({id:ti(tt),name:ti(te),displayName:ti(te)}),challenge:ti(tt),pubKeyCredParams:ti(te),timeout:to(te),excludeCredentials:to([ts]),authenticatorSelection:to(te),attestation:to(te),extensions:to(ta)}),signal:to(te)},tl={type:ti(te),id:ti(te),rawId:ti(tt),authenticatorAttachment:to(te),response:ti({clientDataJSON:ti(tt),attestationObject:ti(tt),transports:tn(te,function(e){var t;return(null==(t=e.getTransports)?void 0:t.call(e))||[]})}),clientExtensionResults:tn(tc,function(e){return e.getClientExtensionResults()})},td={mediation:to(te),publicKey:ti({challenge:ti(tt),timeout:to(te),rpId:to(te),allowCredentials:to([ts]),userVerification:to(te),extensions:to(ta)}),signal:to(te)},th={type:ti(te),id:ti(te),rawId:ti(tt),authenticatorAttachment:to(te),response:ti({clientDataJSON:ti(tt),authenticatorData:ti(tt),signature:ti(tt),userHandle:ti(tt)}),clientExtensionResults:tn(tc,function(e){return e.getClientExtensionResults()})},tp=function(){function e(t,r,n){O(this,e),this._networkClient=t,this._subscriptionService=r,this.dfpProtectedAuth=n,this.checkEligibleInputs=function(){return!(document.querySelectorAll("input[autocomplete*='webauthn']").length<1)||(console.error('No <input> with `"webauthn"` in its `autocomplete` attribute was detected'),!1)}}return S(e,[{key:"register",value:function(e){var t,r;return eu(this,void 0,void 0,k().mark(function n(){var i,o,s;return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ez("stytch.webauthn.register").isOptionalString("domain",null==e?void 0:e.domain).isOptionalString("authenticator_type",null==e?void 0:e.authenticator_type).isOptionalBoolean("is_passkey",null==e?void 0:e.is_passkey).isOptionalNumber("session_duration_minutes",null==e?void 0:e.session_duration_minutes),n.next=3,this._networkClient.fetchSDK({url:"/webauthn/register/start",method:"POST",errorMessage:"Failed to start WebAuthn registration",body:{domain:null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:window.location.hostname,authenticator_type:null!==(r=null==e?void 0:e.authenticator_type)&&void 0!==r?r:void 0,return_passkey_credential_options:null==e?void 0:e.is_passkey,user_agent:navigator.userAgent}});case 3:return i=JSON.parse(n.sent.public_key_credential_creation_options),n.next=8,function(e){return eu(this,void 0,void 0,k().mark(function t(){var r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.credentials.create(tr(e9,tu,e));case 2:return r=t.sent,t.abrupt("return",tr(e7,tl,r));case 4:case"end":return t.stop()}},t)}))}({publicKey:i});case 8:return o=n.sent,n.next=11,this._networkClient.fetchSDK({url:"/webauthn/register",method:"POST",errorMessage:"Failed to register WebAuthn device",body:{public_key_credential:JSON.stringify(o),session_duration_minutes:null==e?void 0:e.session_duration_minutes}});case 11:return s=n.sent,this._subscriptionService.updateStateAndTokens({state:{session:s.session,user:s.__user},session_token:s.session_token,session_jwt:s.session_jwt,intermediate_session_token:null}),n.abrupt("return",eJ(s));case 14:case"end":return n.stop()}},n,this)}))}},{key:"authenticate",value:function(e){var t,r;return eu(this,void 0,void 0,k().mark(function n(){var i,o,s,a,c,u,l,d,h,p;return k().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ez("stytch.webauthn.authenticate").isOptionalString("domain",e.domain).isNumber("session_duration_minutes",e.session_duration_minutes).isOptionalBoolean("is_passkey",e.is_passkey).isOptionalObject("signal",e.signal),n.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:if(o=(i=n.sent).dfp_telemetry_id,s=i.captcha_token,!e.conditional_mediation){n.next=14;break}return n.next=9,this.browserSupportsAutofill();case 9:if(n.sent){n.next=12;break}return console.error("Browser does not support WebAuthn autofill"),n.abrupt("return",null);case 12:if(this.checkEligibleInputs()){n.next=14;break}return n.abrupt("return",null);case 14:return a=this._subscriptionService.getSession()?"/webauthn/authenticate/start/secondary":"/webauthn/authenticate/start/primary",n.next=18,this._networkClient.fetchSDK({url:a,method:"POST",errorMessage:"Failed to start WebAuthn authentication",body:{domain:null!==(t=e.domain)&&void 0!==t?t:window.location.hostname,return_passkey_credential_options:null==e?void 0:e.is_passkey}});case 18:return c=n.sent.public_key_credential_request_options,u=new AbortController,d=Object.assign(Object.assign({},l={publicKey:JSON.parse(c),signal:null!==(r=e.signal)&&void 0!==r?r:u.signal}),{mediation:"conditional"}),n.next=25,function(e){return eu(this,void 0,void 0,k().mark(function t(){var r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.credentials.get(tr(e9,td,e));case 2:return r=t.sent,t.abrupt("return",tr(e7,th,r));case 4:case"end":return t.stop()}},t)}))}(e.conditional_mediation?d:l);case 25:return h=n.sent,n.next=28,this._networkClient.retriableFetchSDK({url:"/webauthn/authenticate",method:"POST",errorMessage:"Failed to authenticate WebAuthn device",body:{public_key_credential:JSON.stringify(h),session_duration_minutes:e.session_duration_minutes,dfp_telemetry_id:o,captcha_token:s},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 28:return p=n.sent,this._subscriptionService.updateStateAndTokens({state:{session:p.session,user:p.__user},session_token:p.session_token,session_jwt:p.session_jwt,intermediate_session_token:null}),n.abrupt("return",eJ(p));case 31:case"end":return n.stop()}},n,this)}))}},{key:"update",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="/webauthn/update/"+e.webauthn_registration_id,t.next=3,this._networkClient.fetchSDK({url:r,method:"PUT",errorMessage:"Failed to update WebAuthn Registration",body:{name:e.name}});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"browserSupportsAutofill",value:function(){return eu(this,void 0,void 0,k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=window.PublicKeyCredential)&&void 0!==t.isConditionalMediationAvailable){e.next=3;break}return e.abrupt("return",new Promise(function(e){return e(!1)}));case 3:return e.abrupt("return",t.isConditionalMediationAvailable());case 4:case"end":return e.stop()}},e)}))}}]),e}(),tf=Promise.resolve({pkceRequiredForPasswordResets:!1}),t_=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tf,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e$();O(this,e),this._networkClient=t,this._subscriptionService=r,this._pkceManager=n,this._config=i,this.dfpProtectedAuth=o}return S(e,[{key:"getCodeChallenge",value:function(){return eu(this,void 0,void 0,k().mark(function e(){var t;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._config;case 2:if(e.sent.pkceRequiredForPasswordResets){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,this._pkceManager.getPKPair();case 8:if(!(t=e.sent)){e.next=11;break}return e.abrupt("return",t.code_challenge);case 11:return e.next=13,this._pkceManager.startPKCETransaction();case 13:return t=e.sent,e.abrupt("return",t.code_challenge);case 15:case"end":return e.stop()}},e,this)}))}},{key:"create",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.create").isString("password",e.password).isString("email",e.email).isNumber("session_duration_minutes",e.session_duration_minutes),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/passwords",method:"POST",errorMessage:"Failed to create password.",body:{email:e.email,password:e.password,session_duration_minutes:e.session_duration_minutes,captcha_token:i,dfp_telemetry_id:n},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:o.user},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(o));case 11:case"end":return t.stop()}},t,this)}))}},{key:"authenticate",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.authenticate").isString("password",e.password).isString("email",e.email).isNumber("session_duration_minutes",e.session_duration_minutes),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/passwords/authenticate",method:"POST",errorMessage:"Failed to authenticate password.",body:{email:e.email,password:e.password,session_duration_minutes:e.session_duration_minutes,captcha_token:i,dfp_telemetry_id:n},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:o.user},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(o));case 11:case"end":return t.stop()}},t,this)}))}},{key:"resetByEmailStart",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.resetByEmailStart").isString("email",e.email).isOptionalString("login_redirect_url",e.login_redirect_url).isOptionalString("reset_password_redirect_url",e.reset_password_redirect_url).isOptionalString("reset_password_template_id",e.reset_password_template_id).isOptionalNumber("reset_password_expiration_minutes",e.reset_password_expiration_minutes),t.next=3,this.getCodeChallenge();case 3:return r=t.sent,t.next=6,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 6:return i=(n=t.sent).dfp_telemetry_id,o=n.captcha_token,t.abrupt("return",this._networkClient.retriableFetchSDK({url:"/passwords/email/reset/start",method:"POST",errorMessage:"Failed to start password reset flow.",body:{email:e.email,login_redirect_url:e.login_redirect_url,reset_password_redirect_url:e.reset_password_redirect_url,reset_password_expiration_minutes:e.reset_password_expiration_minutes,reset_password_template_id:e.reset_password_template_id,code_challenge:r,captcha_token:o,dfp_telemetry_id:i},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP}));case 10:case"end":return t.stop()}},t,this)}))}},{key:"resetByEmail",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o,s,a;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.resetByEmail").isString("token",e.token).isString("password",e.password).isNumber("session_duration_minutes",e.session_duration_minutes),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._pkceManager.getPKPair();case 8:return s=null==(o=t.sent)?void 0:o.code_verifier,t.next=12,this._networkClient.retriableFetchSDK({url:"/passwords/email/reset",method:"POST",errorMessage:"Failed to reset password.",body:{token:e.token,password:e.password,session_duration_minutes:e.session_duration_minutes,captcha_token:i,code_verifier:s,dfp_telemetry_id:n},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 12:return a=t.sent,this._pkceManager.clearPKPair(),this._subscriptionService.updateStateAndTokens({state:{session:a.session,user:a.user},session_token:a.session_token,session_jwt:a.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(a));case 16:case"end":return t.stop()}},t,this)}))}},{key:"resetByExistingPassword",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.resetByExistingPassword").isString("email",e.email).isString("existing_password",e.existing_password).isString("new_password",e.new_password).isNumber("session_duration_minutes",e.session_duration_minutes),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/passwords/existing_password/reset",method:"POST",errorMessage:"Failed to reset password.",body:{email:e.email,existing_password:e.existing_password,new_password:e.new_password,session_duration_minutes:e.session_duration_minutes,dfp_telemetry_id:n,captcha_token:i},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:o.user},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",eJ(o));case 11:case"end":return t.stop()}},t,this)}))}},{key:"resetBySession",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){var r,n,i,o;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.resetBySession").isString("password",e.password),t.next=3,this.dfpProtectedAuth.getDFPTelemetryIDAndCaptcha();case 3:return n=(r=t.sent).dfp_telemetry_id,i=r.captcha_token,t.next=8,this._networkClient.retriableFetchSDK({url:"/passwords/session/reset",method:"POST",errorMessage:"Failed to reset by session.",body:{password:e.password,session_duration_minutes:e.session_duration_minutes,dfp_telemetry_id:n,captcha_token:i},retryCallback:this.dfpProtectedAuth.retryWithCaptchaAndDFP});case 8:return o=t.sent,this._subscriptionService.updateStateAndTokens({state:{session:o.session,user:o.user},session_token:o.session_token,session_jwt:o.session_jwt,intermediate_session_token:null}),t.abrupt("return",o);case 11:case"end":return t.stop()}},t,this)}))}},{key:"strengthCheck",value:function(e){return eu(this,void 0,void 0,k().mark(function t(){return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ez("stytch.passwords.strengthCheck").isOptionalString("email",e.email).isString("password",e.password),t.abrupt("return",this._networkClient.fetchSDK({url:"/passwords/strength_check",method:"POST",errorMessage:"Failed to check password strength.",body:{email:e.email,password:e.password}}));case 2:case"end":return t.stop()}},t,this)}))}}]),e}();Promise.resolve({pkceRequiredForEmailMagicLinks:!1}),Promise.resolve({pkceRequiredForPasswordResets:!1});var tv=function(){function e(t){O(this,e),this.iframeURL=t,this.createIframe()}return S(e,[{key:"createIframe",value:function(){var e=document.querySelector('[src~="'.concat(this.iframeURL,'"]'));e?eq("It looks like you're creating multiple copies of the Stytch client. This behavior is unsupported, and unintended side effects may occur. Make sure you are creating the Stytch client at the global level, and not inside a component's render function."):((e=document.createElement("iframe")).src=this.iframeURL,e.style.position="absolute",e.style.width="0",e.style.height="0",e.style.border="0",document.body.appendChild(e)),"true"!==e.dataset.loaded?this.frame=new Promise(function(t){e.addEventListener("load",function(){e.dataset.loaded="true",t(e)},{once:!0})}):this.frame=Promise.resolve(e)}},{key:"call",value:function(e,t){return eu(this,void 0,void 0,k().mark(function r(){var n,i,o=this;return k().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.frame;case 2:return n=r.sent,i=new MessageChannel,r.abrupt("return",new Promise(function(r,s){i.port1.onmessage=function(e){var t=e.data;i.port1.close(),t.success?r(t.payload):s(eZ.unmarshall(t.error))};var a,c={method:e,args:t};null===(a=n.contentWindow)||void 0===a||a.postMessage(c,o.iframeURL,[i.port2])}));case 5:case"end":return r.stop()}},r,this)}))}}]),e}(),tm=function(){function e(t,r){var n=this;O(this,e),this._subscriptionService=t,this._headlessSessionClient=r,this._onDataChange=function(e){(null==e?void 0:e.session)?n.scheduleBackgroundRefresh():n.cancelBackgroundRefresh()},this._reauthenticateWithBackoff=function(){return eu(n,void 0,void 0,k().mark(function t(){var r;return k().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:return t.prev=2,t.next=5,this._headlessSessionClient.authenticate();case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),!e.isUnrecoverableError(t.t0)){t.next=12;break}return t.abrupt("return",Promise.reject(t.t0));case 12:return r++,t.next=15,new Promise(function(t){return setTimeout(t,e.timeoutForAttempt(r))});case 15:t.next=1;break;case 17:case"end":return t.stop()}},t,this,[[2,8]])}))},this.timeout=null,this._subscriptionService.subscribeToState(this._onDataChange)}return S(e,[{key:"performBackgroundRefresh",value:function(){var e=this;this._reauthenticateWithBackoff().then(function(){e.scheduleBackgroundRefresh()}).catch(function(t){eq("Session background refresh failed. Signalling to app that user is logged out.",{error:t}),e._subscriptionService.destroyState()})}},{key:"scheduleBackgroundRefresh",value:function(){var t=this;this.cancelBackgroundRefresh(),this.timeout=setTimeout(function(){t.performBackgroundRefresh()},e.REFRESH_INTERVAL_MS)}},{key:"cancelBackgroundRefresh",value:function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}}],[{key:"timeoutForAttempt",value:function(e){return Math.floor(350*Math.random())-175+2e3*Math.pow(2,e=Math.min(e,7))}},{key:"isUnrecoverableError",value:function(e){return eA.includes(e.error_type)}}]),e}();tm.REFRESH_INTERVAL_MS=18e4;var ty="bootstrap",tb=function(){function e(t,r,n){var i=this;d(this,e),this._publicToken=t,this._networkClient=r,this._dataLayer=n,this._bootstrapDataPromise=this._networkClient.fetchSDK({url:"/projects/bootstrap/".concat(this._publicToken),method:"GET",errorMessage:"Error fetching bootstrap data for SDK for ".concat(this._publicToken)}).then(e.mapBootstrapData).then(function(e){return i._dataLayer.setItem(ty,JSON.stringify(e)),e}).catch(function(e){return eH(e),{displayWatermark:!1,cnameDomain:null,emailDomains:["stytch.com"],captchaSettings:{enabled:!1},pkceRequiredForEmailMagicLinks:!1,pkceRequiredForPasswordResets:!1,pkceRequiredForOAuth:!1,pkceRequiredForSso:!1,slugPattern:null,createOrganizationEnabled:!1,passwordConfig:null,runDFPProtectedAuth:!1,rbacPolicy:null}})}return p(e,[{key:"getSync",value:function(){var e=this._dataLayer.getItem(ty);if(null===e)return{displayWatermark:!1,cnameDomain:null,emailDomains:["stytch.com"],captchaSettings:{enabled:!1},pkceRequiredForEmailMagicLinks:!1,pkceRequiredForPasswordResets:!1,pkceRequiredForOAuth:!1,pkceRequiredForSso:!1,slugPattern:null,createOrganizationEnabled:!1,passwordConfig:null,runDFPProtectedAuth:!1,rbacPolicy:null};try{return JSON.parse(e)}catch(e){return{displayWatermark:!1,cnameDomain:null,emailDomains:["stytch.com"],captchaSettings:{enabled:!1},pkceRequiredForEmailMagicLinks:!1,pkceRequiredForPasswordResets:!1,pkceRequiredForOAuth:!1,pkceRequiredForSso:!1,slugPattern:null,createOrganizationEnabled:!1,passwordConfig:null,runDFPProtectedAuth:!1,rbacPolicy:null}}}},{key:"getAsync",value:function(){return this._bootstrapDataPromise}}],[{key:"mapBootstrapData",value:function(e){var t,r,n=null!==e.password_config?{ludsComplexity:e.password_config.luds_complexity,ludsMinimumCount:e.password_config.luds_minimum_count}:null;return{displayWatermark:!e.disable_sdk_watermark,captchaSettings:e.captcha_settings,cnameDomain:e.cname_domain,emailDomains:e.email_domains,pkceRequiredForEmailMagicLinks:e.pkce_required_for_email_magic_links,pkceRequiredForPasswordResets:e.pkce_required_for_password_resets,pkceRequiredForOAuth:e.pkce_required_for_oauth,pkceRequiredForSso:e.pkce_required_for_sso,slugPattern:e.slug_pattern,createOrganizationEnabled:e.create_organization_enabled,passwordConfig:n,runDFPProtectedAuth:null!==(t=e.dfp_protected_auth_enabled)&&void 0!==t&&t,dfpProtectedAuthMode:e.dfp_protected_auth_mode,rbacPolicy:null!==(r=e.rbac_policy)&&void 0!==r?r:null}}}]),e}();function tg(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}c((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var tk=p(function e(t){var r=this;d(this,e),this.bootstrapPromise=t,this.executeRecaptcha=function(){return tg(r,void 0,void 0,l().mark(function e(){var t,r,n,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state;case 2:if(r=(t=e.sent).captchaClient,n=t.configured,i=t.siteKey,!n){e.next=10;break}return e.next=9,new Promise(function(e){return r.ready(e)});case 9:return e.abrupt("return",r.execute(i,{action:"LOGIN"}));case 10:case"end":return e.stop()}},e,this)}))},this.state=t.then(function(e){return tg(r,void 0,void 0,l().mark(function t(){var r;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.captchaSettings.enabled){t.next=9;break}return t.t1=!0,t.next=4,r=e.captchaSettings.siteKey,eU("https://www.google.com/recaptcha/enterprise.js?render=".concat(r),function(){return window.grecaptcha.enterprise});case 4:t.t2=t.sent,t.t3=e.captchaSettings.siteKey,t.t0={configured:t.t1,captchaClient:t.t2,siteKey:t.t3},t.next=10;break;case 9:t.t0={configured:!1};case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}},t)}))})}),tw=function(){function e(t){var r=this;d(this,e),this.iframeURL=t,this.oneTapStart=function(e){return r.call("oneTapStart",e)},this.oneTapSubmit=function(e){return r.call("oneTapSubmit",e)},this.parsedPhoneNumber=function(e){return r.call("parsedPhoneNumber",e)}}return p(e,[{key:"frameClient",get:function(){var e;return this._frameClient=null!==(e=this._frameClient)&&void 0!==e?e:new tv(this.iframeURL),this._frameClient}},{key:"call",value:function(e,t){return this.frameClient.call(e,[t])}}]),e}();function tS(e){return(tS="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(e){return _(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_(e)})(e)}function tO(e,t){for(var r,n,i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,n=void 0,n=function(e,t){if("object"!==tS(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==tS(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===tS(n)?n:String(n)),o)}}function tA(e,t,r){return t&&tO(e.prototype,t),r&&tO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tT(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function tE(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tI(e,t)}function tC(e){var t=tD();return function(){var r,n=tL(e);if(t){var i=tL(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tS(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tP(e)}(this,r)}}function tP(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tx(e){var t="function"==typeof Map?new Map:void 0;return(tx=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return tR(e,arguments,tL(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tI(r,e)})(e)}function tR(e,t,r){return(tR=tD()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&tI(i,r.prototype),i}).apply(null,arguments)}function tD(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function tI(e,t){return(tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tL(e){return(tL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(L=U||(U={})).emailMagicLinks="emailMagicLinks",L.oauth="oauth",L.otp="otp",L.crypto="crypto",L.passwords="passwords",L.passkeys="passkeys",(B=K||(K={})).Google="google",B.Microsoft="microsoft",B.Apple="apple",B.Github="github",B.GitLab="gitlab",B.Facebook="facebook",B.Discord="discord",B.Salesforce="salesforce",B.Slack="slack",B.Amazon="amazon",B.Bitbucket="bitbucket",B.LinkedIn="linkedin",B.Coinbase="coinbase",B.Twitch="twitch",B.Twitter="twitter",B.TikTok="tiktok",B.Snapchat="snapchat",B.Figma="figma",B.Yahoo="yahoo",(j=W||(W={})).Vessel="Vessel",j.Phantom="Phantom",j.Metamask="Metamask",j.Coinbase="Coinbase",j.Binance="Binance",j.GenericEthereumWallet="Other Ethereum Wallet",j.GenericSolanaWallet="Other Solana Wallet",(F=G||(G={})).embedded="embedded",F.floating="floating",(N=q||(q={})).SMS="sms",N.WhatsApp="whatsapp",N.Email="email",(M=H||(H={})).MagicLinkLoginOrCreateEvent="MAGIC_LINK_LOGIN_OR_CREATE",M.OTPsLoginOrCreateEvent="OTP_LOGIN_OR_CREATE",M.OTPsAuthenticate="OTP_AUTHENTICATE",M.CryptoWalletAuthenticateStart="CRYPTO_WALLET_AUTHENTICATE_START",M.CryptoWalletAuthenticate="CRYPTO_WALLET_AUTHENTICATE",M.PasswordCreate="PASSWORD_CREATE",M.PasswordAuthenticate="PASSWORD_AUTHENTICATE",M.PasswordResetByEmailStart="PASSWORD_RESET_BY_EMAIL_START",M.PasswordResetByEmail="PASSWORD_RESET_BY_EMAIL",M.PasskeyRegister="PASSKEY_REGISTER",M.PasskeyAuthenticate="PASSKEY_AUTHENTICATE",M.PasskeySkip="PASSKEY_SKIP",M.PasskeyDone="PASSKEY_DONE",M.B2BMagicLinkEmailLoginOrSignup="B2B_MAGIC_LINK_EMAIL_LOGIN_OR_SIGNUP",M.B2BMagicLinkAuthenticate="B2B_MAGIC_LINK_AUTHENTICATE",M.B2BMagicLinkEmailDiscoverySend="B2B_MAGIC_LINK_EMAIL_DISCOVERY_SEND",M.B2BMagicLinkDiscoveryAuthenticate="B2B_MAGIC_LINK_DISCOVERY_AUTHENTICATE",M.B2BSSOStart="B2B_SSO_START",M.B2BSSOAuthenticate="B2B_SSO_AUTHENTICATE",M.B2BOAuthAuthenticate="B2B_OAUTH_AUTHENTICATE",M.B2BOAuthDiscoveryAuthenticate="B2B_OAUTH_DISCOVERY_AUTHENTICATE",M.B2BDiscoveryOrganizationsCreate="B2B_DISCOVERY_ORGANIZATIONS_CREATE",M.B2BDiscoveryIntermediateSessionExchange="B2B_DISCOVERY_INTERMEDIATE_SESSION_EXCHANGE",M.B2BPasswordAuthenticate="B2B_PASSWORD_AUTHENTICATE",M.B2BPasswordResetByEmailStart="B2B_PASSWORD_RESET_BY_EMAIL_START",M.B2BPasswordResetByEmail="B2B_PASSWORD_RESET_BY_EMAIL",M.B2BPasswordResetBySession="B2B_PASSWORD_RESET_BY_SESSION",function(){tE(t,tx(Error));var e=tC(t);function t(r,n){var i;return tT(this,t),(i=e.call(this,r+"\n"+n)).message=r+"\n"+n,i.name="SDKAPIUnreachableError",i.details=n,Object.setPrototypeOf(tP(i),t.prototype),i}tA(t)}(),function(){tE(t,tx(Error));var e=tC(t);function t(r,n){var i;return tT(this,t),(i=e.call(this)).name="StytchSDKUsageError",i.message="Invalid call to ".concat(r,"\n")+n,i}tA(t)}(),function(){tE(t,tx(Error));var e=tC(t);function t(r){tT(this,t),(n=e.call(this)).name="StytchSDKSchemaError";var n,i,o=null===(i=r.body)||void 0===i?void 0:i.map(function(e){return"".concat(e.dataPath,": ").concat(e.message)}).join("\n");return n.message="[400] Request does not match expected schema\n".concat(o),n}tA(t)}(),function(){tE(t,tx(Error));var e=tC(t);function t(r){tT(this,t),(n=e.call(this)).name="StytchSDKAPIError";var n,i=r.status_code,o=r.error_type,s=r.error_message,a=r.error_url,c=r.request_id;return n.error_type=o,n.error_message=s,n.error_url=a,n.request_id=c,n.status_code=i,n.message="[".concat(i,"] ").concat(o,"\n")+"".concat(s,"\n")+"See ".concat(a," for more information.\n")+(c?"request_id: ".concat(c,"\n"):""),n}tA(t)}(),function(){tE(t,tx(Error));var e=tC(t);function t(r){var n;return tT(this,t),(n=e.call(this)).name="StytchSDKNativeError",n.error_type=r,n.message="".concat(r),n}tA(t)}(),(X=Y||(Y={})).BiometricsSensorError="biometrics_sensor_error",X.DeviceCredentialsNotAllowed="device_credentials_not_allowed",X.DeviceHardwareError="device_hardware_error",X.InternalError="internal_error",X.KeyInvalidated="key_invalidated",X.KeystoreUnavailable="keystore_unavailable",X.NoBiometricsEnrolled="no_biometrics_enrolled",X.NoBiometricsRegistration="no_biometrics_registration",X.SessionExpired="session_expired",X.UserCancellation="user_cancellation",X.UserLockedOut="user_locked_out",X.BiometricsNotAvailable="biometrics_not_available",($=z||(z={})).emailMagicLinks="emailMagicLinks",$.sso="sso",$.passwords="passwords",$.oauth="oauth",(Z=V||(V={})).Discovery="Discovery",Z.Organization="Organization",Z.PasswordReset="PasswordReset",(Q=J||(J={})).Google="google",Q.Microsoft="microsoft";var tB=function(e){o(r,e);var t=a(r);function r(e,n,i,o,s,a){var u;return d(this,r),(u=t.call(this,e,n,i,o,s))._oneTap=a,u.startOneTap=function(e){return tg(c(u),void 0,void 0,l().mark(function t(){var r,n,i;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._oneTap.createOneTapClient();case 2:if((r=t.sent).success){t.next=5;break}throw Error("One Tap could not load: ".concat(r.reason));case 5:return n=r.client,i=this._oneTap.createOnSuccessHandler({signupRedirectUrl:e.signup_redirect_url,loginRedirectUrl:e.login_redirect_url,onSuccess:this._oneTap.RedirectOnSuccess}),t.abrupt("return",n.render({style:{position:G.floating},onOneTapCancelled:e.onOneTapCancelled,callback:i}));case 7:case"end":return t.stop()}},t,this)}))},u.googleOneTap={start:u.startOneTap},u}return p(r)}(e8),tj=function(){function e(t,r,n,i){d(this,e),this._publicToken=t,this._subscriptionDataLayer=r,this.baseURL=n,this.additionalTelemetryDataFn=i,this.updateSessionToken=function(){return null},this.eventLogger=new eQ({maxBatchSize:15,intervalDurationMs:800,logEventURL:this.buildSDKUrl("/events")})}return p(e,[{key:"logEvent",value:function(e){var t=e.name,r=e.details,n=e.error,i=void 0===n?{}:n;this.eventLogger.logEvent(this.createTelemetryBlob(),{public_token:this._publicToken,event_name:t,details:r,error_code:i.error_code,error_description:i.error_description,http_status_code:i.http_status_code})}},{key:"createTelemetryBlob",value:function(){return Object.assign(Object.assign({event_id:"event-id-".concat(eN()),app_session_id:"app-session-id-".concat(eN()),persistent_id:"persistent-id-".concat(eN()),client_sent_at:new Date().toISOString(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone},this.additionalTelemetryDataFn()),{app:{identifier:window.location.hostname},sdk:{identifier:"Stytch.js Javascript SDK",version:"3.3.0"}})}},{key:"fetchSDK",value:function(e){var t=e.url,r=e.body,n=e.errorMessage,i=e.method;return tg(this,void 0,void 0,l().mark(function e(){var o,s,a,c;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this._subscriptionDataLayer.readSessionCookie().session_token,s="Basic "+window.btoa(this._publicToken+":"+(o||this._publicToken)),a=window.btoa(JSON.stringify(this.createTelemetryBlob())),c=window.location.origin,e.abrupt("return",eD({basicAuthHeader:s,body:r,errorMessage:n,finalURL:this.buildSDKUrl(t),method:i,xSDKClientHeader:a,xSDKParentHostHeader:c}));case 2:case"end":return e.stop()}},e,this)}))}},{key:"retriableFetchSDK",value:function(e){var t=e.url,r=e.body,n=e.errorMessage,i=e.method,o=e.retryCallback;return tg(this,void 0,void 0,l().mark(function e(){var s,a,c,u;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=this._subscriptionDataLayer.readSessionCookie().session_token,a="Basic "+window.btoa(this._publicToken+":"+(s||this._publicToken)),c=window.btoa(JSON.stringify(this.createTelemetryBlob())),u=window.location.origin,e.abrupt("return",function(e){var t=e.method,r=e.errorMessage,n=e.finalURL,i=e.basicAuthHeader,o=e.xSDKClientHeader,s=e.xSDKParentHostHeader,a=e.body,c=e.retryCallback;return eu(this,void 0,void 0,k().mark(function e(){var u;return k().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u={method:t,errorMessage:r,finalURL:n,basicAuthHeader:i,xSDKClientHeader:o,xSDKParentHostHeader:s,body:a},e.prev=1,e.next=4,eD(u);case 4:case 15:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(e.t0 instanceof eR)){e.next=16;break}return e.next=12,c(e.t0,u);case 12:return u=e.sent,e.next=15,eD(u);case 16:throw e.t0;case 17:case"end":return e.stop()}},e,null,[[1,7]])}))}({basicAuthHeader:a,body:r,errorMessage:n,finalURL:this.buildSDKUrl(t),method:i,xSDKClientHeader:c,xSDKParentHostHeader:u,retryCallback:o}));case 2:case"end":return e.stop()}},e,this)}))}},{key:"buildSDKUrl",value:function(e){return"".concat(this.baseURL,"/sdk/v1").concat(e)}}]),e}(),tF=function(){function e(t,r,n){d(this,e),this._googleClient=t,this._publicToken=r,this._clientId=n}return p(e,[{key:"cancel",value:function(){this._googleClient.cancel()}},{key:"render",value:function(e){var t=e.callback,r=e.onOneTapCancelled,n=e.style;return tg(this,void 0,void 0,l().mark(function e(){var i,o=this;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={client_id:this._clientId,callback:t,auto_select:!1,context:"use",itp_support:!0},e.abrupt("return",(n.position===G.embedded&&(i.prompt_parent_id="google-parent-prompt",i.cancel_on_tap_outside=!1),this._googleClient.initialize(i),new Promise(function(e){o._googleClient.prompt(function(t){return t.isSkippedMoment()?("user_cancel"===t.getSkippedReason()&&(null==r||r()),e({success:!1,reason:t.getSkippedReason()})):t.isNotDisplayed()?e({success:!1,reason:t.getNotDisplayedReason()}):(o.styleFrame(n),e({success:!0}))})})));case 2:case"end":return e.stop()}},e,this)}))}},{key:"styleFrame",value:function(e){e.position===G.embedded&&Array.from(document.getElementsByTagName("iframe")).forEach(function(e){e.src.includes(es)&&(e.style.width="100%")})}}]),e}(),tN=function(){function e(t,r){var n=this;d(this,e),this._publicToken=t,this.clientsideServices=r,this.createOnSuccessHandler=function(e){var t=e.loginRedirectUrl,r=e.signupRedirectUrl,i=e.onSuccess;return function(e){return tg(n,void 0,void 0,l().mark(function n(){var o;return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.credential,n.next=3,this.submitGoogleOneTapToken({credential:o,loginRedirectUrl:t,signupRedirectUrl:r});case 3:i(n.sent.redirect_url);case 6:case"end":return n.stop()}},n,this)}))}},this.RedirectOnSuccess=function(e){window.location.href=e}}return p(e,[{key:"createOneTapClient",value:function(){return tg(this,void 0,void 0,l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchGoogleStart();case 3:t=e.sent.googleClientId,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{success:!1,reason:e.t0.error_type});case 10:if(""!==t){e.next=12;break}return e.abrupt("return",{success:!1,reason:"oauth_config_not_found"});case 12:return e.t1=!0,e.t2=tF,e.next=16,eU(ea,function(){return window.google.accounts.id});case 16:return e.t3=e.sent,e.t4=this._publicToken,e.t5=t,e.t6=new e.t2(e.t3,e.t4,e.t5),e.abrupt("return",{success:e.t1,client:e.t6});case 21:case"end":return e.stop()}},e,this,[[0,7]])}))}},{key:"fetchGoogleStart",value:function(){return this.googleConfig||(this.googleConfig=this.clientsideServices.oneTapStart({publicToken:this._publicToken})),this.googleConfig}},{key:"submitGoogleOneTapToken",value:function(e){var t=e.credential,r=e.loginRedirectUrl,n=e.signupRedirectUrl;return tg(this,void 0,void 0,l().mark(function e(){var i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchGoogleStart();case 2:return i=e.sent.oauthCallbackId,e.abrupt("return",this.clientsideServices.oneTapSubmit({publicToken:this._publicToken,idToken:t,loginRedirectURL:r,oauthCallbackID:i,signupRedirectURL:n}));case 5:case"end":return e.stop()}},e,this)}))}}],[{key:"WillGoogleOneTapShowBannerForUA",value:function(e){var t=function(e,t){return -1!==e.indexOf(t)},r=t(e,"iPad")||t(e,"Android")&&!t(e,"Mobile")||t(e,"Silk"),n=t(e,"iPod")||t(e,"iPhone")||t(e,"Android")||t(e,"IEMobile");return!r&&n}},{key:"WillGoogleOneTapShowEmbedded",value:function(){return!e.WillGoogleOneTapShowBannerForUA(navigator.userAgent)}}]),e}();function tM(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var tU=function(){function e(t,r){d(this,e),this._dataLayer=t,this.namespace=r}return p(e,[{key:"key",value:function(){return"PKCE_VERIFIER:"+this.namespace}},{key:"startPKCETransaction",value:function(){return tg(this,void 0,void 0,l().mark(function t(){var r;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.createProofkeyPair();case 2:return r=t.sent,t.abrupt("return",(this._dataLayer.setItem(this.key(),JSON.stringify(r)),r));case 4:case"end":return t.stop()}},t,this)}))}},{key:"getPKPair",value:function(){var e=this._dataLayer.getItem(this.key());if(null!==e)try{return JSON.parse(e)}catch(e){return void eq("Found malformed Proof Key pair in localstorage.")}}},{key:"clearPKPair",value:function(){return this._dataLayer.removeItem(this.key())}}],[{key:"createProofkeyPair",value:function(){return tg(this,void 0,void 0,l().mark(function e(){var t,r,o,s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint32Array(16),window.crypto.getRandomValues(r),o=Array.from(r).map(tM).join(""),e.next=5,window.crypto.subtle.digest("SHA-256",new TextEncoder().encode(o));case 5:var a;return s=e.sent,e.abrupt("return",{code_challenge:btoa((t=String.fromCharCode).call.apply(t,[null].concat(function(e){if(Array.isArray(e))return i(e)}(a=new Uint8Array(s))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||n(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),code_verifier:o});case 7:case"end":return e.stop()}},e)}))}}]),e}(),tK=function(){function e(t){d(this,e),this._networkClient=t}return p(e,[{key:"searchUser",value:function(e){return this._networkClient.fetchSDK({url:"/users/search",method:"POST",body:{email:e},errorMessage:"Error searching for user ".concat(e)})}},{key:"searchOrganization",value:function(e){return this._networkClient.fetchSDK({url:"/b2b/organizations/search",method:"POST",body:{organization_slug:e},errorMessage:"Error searching slug"})}},{key:"searchMember",value:function(e,t){return this._networkClient.fetchSDK({url:"/b2b/organizations/members/search",method:"POST",body:{email_address:e,organization_id:t},errorMessage:"Error searching for member ".concat(e)})}}]),e}(),tW=function(e){return(document.cookie?document.cookie.split("; "):[]).filter(function(t){var r;return e===(function(e){if(Array.isArray(e))return e}(r=t.split("="))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(r,1)||n(r,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]}).length>1};/*! js-cookie v3.0.1 | MIT */function tG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var tq=function e(t,r){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=tG({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},i=0;i<r.length;i++){var o=r[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(n[a]=t.read(s,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",tG({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,tG({},this.attributes,t))},withConverter:function(t){return e(tG({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),tH=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"stytch_sdk_state_".concat(e).concat(t?"::".concat(t):"")},tY=function(e){o(r,e);var t=a(r);function r(){return d(this,r),t.apply(this,arguments)}return p(r)}(function(){function e(t,r){var n,i=this;d(this,e),this.browserSessionStorage={getItem:function(e){return sessionStorage.getItem(tH(i.publicToken,e))},setItem:function(e,t){return sessionStorage.setItem(tH(i.publicToken,e),t)},removeItem:function(e){return sessionStorage.removeItem(tH(i.publicToken,e))}},this.publicToken=t,this.state=null,this.subscriptions={},(null==r?void 0:r.cookieOptions)?(ez("SubscriptionDataLayer").isOptionalString("cookieOptions.opaqueTokenCookieName",r.cookieOptions.opaqueTokenCookieName).isOptionalString("cookieOptions.jwtCookieName",r.cookieOptions.jwtCookieName).isOptionalString("cookieOptions.istCookieName",r.cookieOptions.istCookieName).isOptionalString("cookieOptions.path",r.cookieOptions.path).isOptionalString("cookieOptions.domain",r.cookieOptions.domain),this._jwtCookieName=r.cookieOptions.jwtCookieName||null,this._opaqueTokenCookieName=r.cookieOptions.opaqueTokenCookieName||null,this._cookiePath=r.cookieOptions.path||null,this._domain=r.cookieOptions.domain||null,this._cookieAvailableToSubdomains=r.cookieOptions.availableToSubdomains||!1,this._istCookieName=r.cookieOptions.istCookieName||null):(this._opaqueTokenCookieName=null,this._jwtCookieName=null,this._cookiePath=null,this._domain=null,this._cookieAvailableToSubdomains=!1,this._istCookieName=null);var o=localStorage.getItem(tH(this.publicToken));if(o){try{n=JSON.parse(o)}catch(e){return void this.syncToLocalStorage()}this.state=n}}return p(e,[{key:"opaqueTokenCookieName",get:function(){var e;return null!==(e=this._opaqueTokenCookieName)&&void 0!==e?e:"stytch_session"}},{key:"jwtCookieName",get:function(){var e;return null!==(e=this._jwtCookieName)&&void 0!==e?e:"stytch_session_jwt"}},{key:"istCookieName",get:function(){var e;return null!==(e=this._istCookieName)&&void 0!==e?e:"stytch_intermediate_session_token"}},{key:"readSessionCookie",value:function(){return{session_token:tq.get(this.opaqueTokenCookieName),session_jwt:tq.get(this.jwtCookieName)}}},{key:"readIntermediateSessionTokenCookie",value:function(){return tq.get(this.istCookieName)}},{key:"writeSessionCookie",value:function(t){var r,n,i,o,s=t.state,a=t.session_token,c=t.session_jwt,u=e.generateCookieOpts({expiresAt:null!==(n=null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.expires_at)&&void 0!==n?n:"",availableToSubdomains:this._cookieAvailableToSubdomains,path:this._cookiePath,domain:this._domain});tq.set(this.opaqueTokenCookieName,a,u),tq.set(this.jwtCookieName,c,u);var l=e.generateCookieOpts({expiresAt:null!==(o=null===(i=null==s?void 0:s.session)||void 0===i?void 0:i.expires_at)&&void 0!==o?o:"",availableToSubdomains:!this._cookieAvailableToSubdomains,path:this._cookiePath,domain:this._domain});tW(this.jwtCookieName)&&tq.remove(this.jwtCookieName,l),tW(this.opaqueTokenCookieName)&&tq.remove(this.opaqueTokenCookieName,l),tW(this.jwtCookieName)&&eq("Could not remove extraneous JWT cookie. This might happen if the cookie has been set using multiple `path` settings, and may produce unwanted behavior."),tW(this.opaqueTokenCookieName)&&eq("Could not remove extraneous opaque token cookie.")}},{key:"writeIntermediateSessionTokenCookie",value:function(t){var r=new Date(Date.now()+6e5),n=e.generateCookieOpts({expiresAt:r.toString(),availableToSubdomains:this._cookieAvailableToSubdomains,path:this._cookiePath,domain:this._domain});tq.set(this.istCookieName,t,n)}},{key:"removeSessionCookie",value:function(){this.removeCookies([this.opaqueTokenCookieName,this.jwtCookieName])}},{key:"removeISTCookie",value:function(){this.removeCookies([this.istCookieName])}},{key:"removeCookies",value:function(t){var r=this;[!0,!1].forEach(function(n){[r._cookiePath,null].forEach(function(i){[r._domain,null].forEach(function(r){var o=e.generateCookieOpts({expiresAt:new Date(0).toString(),availableToSubdomains:n,path:i,domain:r});t.forEach(function(e){tq.remove(e,o)})})})})}},{key:"syncToLocalStorage",value:function(){localStorage.setItem(tH(this.publicToken),JSON.stringify(this.state))}},{key:"getItem",value:function(e){return localStorage.getItem(tH(this.publicToken,e))}},{key:"setItem",value:function(e,t){return localStorage.setItem(tH(this.publicToken,e),t)}},{key:"removeItem",value:function(e){return localStorage.removeItem(tH(this.publicToken,e))}}],[{key:"generateCookieOpts",value:function(e){var t=e.path,r=e.domain,n=e.availableToSubdomains,i=e.expiresAt,o={expires:new Date(i),sameSite:"lax"};return t&&(o.path=t),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))?o.secure=!1:(n&&(o.domain=r||window.location.host),o.secure=!0),o}}]),e}()),tz=Symbol.for("__stytch_DataLayer"),tV=function(e,t){var r,n=((r=window)[tz]||(r[tz]={}),r[tz]);return n[e]||(n[e]=new tY(e,t)),n[e]},tJ=function(e,t){Object.values(e).forEach(function(e){return e(t)})},tX=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).KEYS_TO_EXCLUDE,t=void 0===e?[]:e;return function e(r,n){return g(r)===g(n)&&(null===r||null===n?r===n:"object"===g(r)?Object.keys(r).length===Object.keys(n).length&&!Object.keys(r).some(function(e){return!(e in n)})&&Object.entries(r).filter(function(e){var r=m(e,1)[0];return!t.includes(r)}).every(function(t){var r=m(t,2),i=r[0];return e(r[1],n[i])}):r===n)}}({KEYS_TO_EXCLUDE:["last_accessed_at"]}),t$=function(e){o(r,e);var t=a(r);function r(){var e;return d(this,r),e=t.apply(this,arguments),e.updateUser=function(t){return e.updateState({user:t})},e.getUser=function(){var t,r;return null!==(r=null===(t=e.getState())||void 0===t?void 0:t.user)&&void 0!==r?r:null},e.getSession=function(){var t,r;return null!==(r=null===(t=e.getState())||void 0===t?void 0:t.session)&&void 0!==r?r:null},e}return p(r)}(function(){function e(t,r){var n=this;d(this,e),this._publicToken=t,this._datalayer=r,this._listen=function(e){if(e.key===tH(n._publicToken)){if(null===e.newValue||"null"===e.newValue)return void n.destroyState();var t=JSON.parse(e.newValue);n.updateState(t)}},window.addEventListener("storage",this._listen),this._datalayer.readSessionCookie().session_token||this.destroyState()}return p(e,[{key:"getTokens",value:function(){var e=this._datalayer.readSessionCookie(),t=e.session_token,r=e.session_jwt;return"string"!=typeof t||"string"!=typeof r?null:{session_token:t,session_jwt:r}}},{key:"getIntermediateSessionToken",value:function(){return this._datalayer.readIntermediateSessionTokenCookie()||null}},{key:"destroyState",value:function(){this.updateStateAndTokens({state:null,session_token:null,session_jwt:null,intermediate_session_token:null})}},{key:"_updateStateAndTokensInternal",value:function(e){var t=this._datalayer.state,r=null===e.state?null:Object.assign(Object.assign({},this._datalayer.state),e.state);this._datalayer.state=r,tX(t,r)||tJ(this._datalayer.subscriptions,r)}},{key:"updateStateAndTokens",value:function(e){e.state?(this._datalayer.writeSessionCookie(e),this._datalayer.removeISTCookie()):e.intermediate_session_token?(this._datalayer.writeIntermediateSessionTokenCookie(e.intermediate_session_token),this._datalayer.removeSessionCookie()):(this._datalayer.removeSessionCookie(),this._datalayer.removeISTCookie()),this._updateStateAndTokensInternal(e),this._datalayer.syncToLocalStorage()}},{key:"updateState",value:function(e){var t=this._datalayer.state,r=null===e?null:Object.assign(Object.assign({},this._datalayer.state),e);this._datalayer.state=r,tX(t,r)||(tJ(this._datalayer.subscriptions,r),this._datalayer.syncToLocalStorage())}},{key:"updateTokens",value:function(e){var t=e.session_token,r=e.session_jwt,n=Object.assign(Object.assign({},this._datalayer.readSessionCookie()),{session_token:t,session_jwt:r});t||r?(this._datalayer.writeSessionCookie(n),this._datalayer.removeISTCookie()):this._datalayer.removeSessionCookie()}},{key:"subscribeToState",value:function(e){var t,r;return(t=this._datalayer.subscriptions)[r=Math.random().toString(36).slice(-10)]=e,function(){return delete t[r]}}},{key:"getState",value:function(){return this._datalayer.state}},{key:"destroy",value:function(){window.removeEventListener("storage",this._listen)}},{key:"syncFromDeviceStorage",value:function(){return null}}]),e}()),tZ=Symbol.for("stytch__internal_b2c"),tQ=p(function e(t,r){var n,i,o,s,a,c,u,l,h,p,_,v,m,y=this;d(this,e),function(e){if("undefined"==typeof window)throw Error("The ".concat(e," is not compatible with server-side environments.\nIf using nextjs, use the create").concat(e," method instead.\n```\n").concat("StytchUIClient"===e?"import { createStytchUIClient } from '@stytch/nextjs/ui';\n    \nconst stytch = createStytchUIClient('public-token-...');\n":"import { createStytchHeadlessClient } from '@stytch/nextjs/ui';\n    \nconst stytch = createStytchHeadlessClient('public-token-...');\n","\n```\n"))}("StytchHeadlessClient"),"string"!=typeof t?eq("Public token is malformed. Expected a string, got ".concat(g(t),".").concat(eY)):""===t?eq('Public token is malformed. Expected "public-token-...", got an empty string.'.concat(eY)):t.startsWith("public-token-")||eq('Public token is malformed. Expected "public-token-...", got '.concat(t,".").concat(eY));var b={cookieOptions:null==r?void 0:r.cookieOptions,endpoints:{sdkBackendURL:null!==(s=null===(o=null==r?void 0:r.endpoints)||void 0===o?void 0:o.sdkBackendURL)&&void 0!==s?s:"https://web.stytch.com",testAPIURL:null!==(c=null===(a=null==r?void 0:r.endpoints)||void 0===a?void 0:a.testAPIURL)&&void 0!==c?c:"https://test.stytch.com",liveAPIURL:null!==(l=null===(u=null==r?void 0:r.endpoints)||void 0===u?void 0:u.liveAPIURL)&&void 0!==l?l:"https://api.stytch.com",dfpBackendURL:null!==(p=null===(h=null==r?void 0:r.endpoints)||void 0===h?void 0:h.dfpBackendURL)&&void 0!==p?p:"https://telemetry.stytch.com",clientsideServicesIframeURL:null!==(v=null===(_=null==r?void 0:r.endpoints)||void 0===_?void 0:_.clientsideServicesIframeURL)&&void 0!==v?v:"https://js.stytch.com/clientside-services/index.html"}};this._dataLayer=tV(t,r),this._subscriptionService=new t$(t,this._dataLayer);var k=new tU(this._dataLayer,"passwords");this._networkClient=new tj(t,this._dataLayer,b.endpoints.sdkBackendURL,function(){var e,t,r,n;return{stytch_user_id:null===(t=null===(e=y._dataLayer.state)||void 0===e?void 0:e.user)||void 0===t?void 0:t.user_id,stytch_session_id:null===(n=null===(r=y._dataLayer.state)||void 0===r?void 0:r.session)||void 0===n?void 0:n.session_id}});var w=new tb(t,this._networkClient,this._dataLayer),S=new tk(w.getAsync()),O=new eX(t,b.endpoints.dfpBackendURL,w.getAsync(),S.executeRecaptcha),A=new tw(b.endpoints.clientsideServicesIframeURL),T=new tN(t,A),E=new tK(this._networkClient);this.user=new e0(this._networkClient,this._subscriptionService),this.session=new e1(this._networkClient,this._subscriptionService),this.magicLinks=new e3(this._networkClient,this._subscriptionService,new tU(this._dataLayer,"magic_links"),k,w.getAsync(),O),this.otps=new e4(this._networkClient,this._subscriptionService,S.executeRecaptcha,O),this.oauth=new tB(this._networkClient,this._subscriptionService,new tU(this._dataLayer,"oauth"),w.getAsync(),{publicToken:t,testAPIURL:b.endpoints.testAPIURL,liveAPIURL:b.endpoints.liveAPIURL},T),this.cryptoWallets=new e6(this._networkClient,this._subscriptionService,S.executeRecaptcha,O),this.totps=new e5(this._networkClient,this._subscriptionService,O),this.webauthn=new tp(this._networkClient,this._subscriptionService,O),this.passwords=new t_(this._networkClient,this._subscriptionService,k,w.getAsync(),O),this._sessionManager=new tm(this._subscriptionService,this.session),this._dataLayer.readSessionCookie().session_token&&this._sessionManager.performBackgroundRefresh(),this._networkClient.logEvent({name:"sdk_instance_instantiated",details:{event_callback_registered:!1,error_callback_registered:!1,success_callback_registered:!1}}),m={bootstrap:w,clientsideServices:A,captcha:S,oneTap:T,searchManager:E,publicToken:t,dataLayer:this._dataLayer,networkClient:this._networkClient},Object.assign(this,(n={},(i=f(i=tZ))in n?Object.defineProperty(n,i,{value:m,enumerable:!0,configurable:!0,writable:!0}):n[i]=m,n))})}}]);