(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2176],{54758:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return i(26392)}])},45168:function(e,t,i){"use strict";var n=i(85893),r=i(67294),a=i(18127),o=i(20117),s=i(52228),l=i(77594),u=i(98698),c=i(81524),d=i(70928),h=i(33014),m=i(22635),g=i(26138),p=i(37842),f=i(36398);let x=e=>{let{title:t,onEmailSubmit:i,onGoogleSubmit:x,isSignUp:y,error:w}=e,b=(0,a.Z)(),[v,Z]=(0,r.useState)(w);(0,o.Z)()&&(window.parsedUA=b);let k=(0,r.useMemo)(()=>null==b?void 0:b.isMobile,[b]),P=(0,r.useMemo)(()=>null==b?void 0:b.isWebauthnSupported,[b]),j=(0,r.useMemo)(()=>!P||k,[k,P]);return(0,r.useEffect)(()=>{b&&(k?Z("Mobile devices are not yet supported. Please try Google Chrome on desktop."):P||Z((0,n.jsxs)(s.Z,{display:"inline-block",children:["Your OS or browser does not support passkeys. Check out"," ",(0,n.jsx)(p.Z,{inline:!0,underline:!0,newTab:!0,href:f.L.notion.deviceOsSupport.url,color:"error",children:f.L.notion.deviceOsSupport.name})," ","for more information."]})))},[Z,b,P,k]),(0,n.jsxs)(m.Z,{direction:"vertical",width:"full",children:[(0,n.jsx)(s.Z,{as:"h1",variant:"headlineLarge",align:"center",children:t}),(0,n.jsxs)(d.ZP,{display:"flex",error:v||w,flexDirection:"column",onSubmit:i,marginY:"md",children:[(0,n.jsxs)(l.Z,{variant:"inverted",onClick:x,disabled:j,children:[(0,n.jsx)(u.Z,{size:"16px",style:{marginRight:"12px"}})," Continue with Google"]}),(0,n.jsxs)(m.Z,{marginY:"lg",children:[(0,n.jsx)(h.Z,{faint:!0}),(0,n.jsx)(s.Z,{variant:"bodySmall",color:"primary50",marginX:"sm",children:"OR"}),(0,n.jsx)(h.Z,{faint:!0})]}),(0,n.jsx)(c.Z,{inverted:!0,name:"email","data-testid":"email-input",disabled:j,label:"",type:"email",autoFocus:!0,placeholder:"Your email address",required:!0}),(0,n.jsx)(d.k4,{asChild:!0,children:(0,n.jsxs)(l.Z,{type:"submit",disabled:j,variant:"secondaryInverted",marginTop:"16px","data-testid":"email-button",children:[(0,n.jsx)(g.LQ,{size:"16px",style:{marginRight:"10px",marginBottom:"-1px"}}),"Request a sign ",y?"up":"in"," link"]})})]})]})};t.Z=x},18127:function(e,t,i){"use strict";i.d(t,{Z:function(){return c}});var n=i(67294),r=i(42238);let a=async()=>{if(window.PublicKeyCredential)try{let e=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return e}catch(e){}return!1};var o=i(20117);let s=()=>{if(!(0,o.Z)())return!1;let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(!e){let t=document.getElementsByTagName("body")[0];e=-1!==window.getComputedStyle(t).getPropertyValue("content").indexOf("mobile")}return e},l=async()=>{let e=new r.UAParser;e.setUA(window.navigator.userAgent);let t=await a();return{...e.getResult(),isWebauthnSupported:t,isMobile:s()}},u=()=>{let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{l().then(t)},[]),e};var c=u},26392:function(e,t,i){"use strict";i.r(t);var n=i(85893),r=i(67294),a=i(48780),o=i(11163),s=i(40978),l=i(40194),u=i(83868),c=i.n(u),d=i(45619),h=i(32510),m=i(77699),g=i(41537),p=i(45168),f=i(26755),x=i(37842),y=i(26138),w=i(34155);let b=()=>{let{signInWithEmail:e,signInWithGoogle:t,signOut:i}=(0,h.aC)(),s=(0,o.useRouter)(),{query:u}=(0,o.useRouter)(),b=u.authError===h.l4.Resend?"Authentication link expired or already used. Please request a new sign in link.":u.authError===h.l4.Generic?"Authentication failed. Please request a new sign in link.":u.authError===h.l4.GoogleAccountNotFound?"The Google account is not associated with a Dakota account. Try a different account or sign in using an email address.":"",[v,Z]=(0,r.useState)(b),{closeModal:k}=(0,g.Z)();(0,r.useEffect)(()=>{u.authError&&i(),localStorage.removeItem(d.F.sessionID),k()},[k,i,u]);let P=(0,r.useCallback)(e=>{"true"!==w.env.NEXT_PUBLIC_MOCK_STYTCH&&s.push({pathname:m.Z6.checkEmail,query:{email:e}})},[s]),j=(0,r.useCallback)(async t=>{let{email:i}=t;if(c()(i))try{await e(i),(0,a.cAy)({email:i}),P(i)}catch(e){if(e.status_code)switch(e.status_code){case 400:"invalid_email"===e.error_type?Z("Please enter a valid email."):P(i);break;case 401:case 404:P(i);break;default:Z("Something went wrong. Please try again later."),console.error(e)}else Z("Something went wrong. Please try again later."),console.error(e)}else Z("Please enter a valid email.")},[P,Z,e]),_="Sign in to Dakota";return(0,n.jsx)(l.Z,{title:_,narrow:!0,indexPage:!0,auxHeader:f.P?(0,n.jsxs)(x.Z,{color:"light",href:"/signup",children:["Open account",(0,n.jsx)(y.wc,{size:"14px",style:{marginLeft:"6px",marginBottom:"-3px"}})]}):void 0,children:(0,n.jsx)(p.Z,{title:_,onEmailSubmit:j,onGoogleSubmit:t,error:v})})};b.getLayout=e=>(0,n.jsx)(s.Z,{children:e}),t.default=b}},function(e){e.O(0,[309,4904,1579,5675,9445,2238,663,978,6565,9774,2888,179],function(){return e(e.s=54758)}),_N_E=e.O()}]);